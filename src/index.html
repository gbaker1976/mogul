<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Mogul - Admin</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/_all.css" type="text/css" />
        <link rel="import" id="theme" href="theme/wasabi/theme.html" />
    </head>
    <body>
        <div data-container id="main" data-view="index" data-interaction="slide-horiz">

            <div data-row>

                <ul data-cell data-control-list data-type="nav">
                    <li data-item data-column data-surface data-type="profile">
                        <div data-profile-image>
                            <img src="theme/wasabi/img/profile.png" />
                        </div>
                        <div data-cell data-profile-info>
                            Mr. Socks Vainglorious
                        </div>
                    </li>
                    <li data-item data-surface id="nav-index" class="current">
                        <a href="/">Dashboard</a>
                    </li>
                    <li data-item data-surface id="nav-sites">
                        <a href="sites.html">Sites</a>
                    </li>
                    <li data-item data-surface id="nav-audience">
                        <a href="audience.html">Audience</a>
                    </li>
                    <li data-item data-surface id="nav-connectors">
                        <a href="connectors.html">Connectors</a>
                    </li>
                    <li data-item data-surface id="nav-library">
                        <a href="library.html">Library</a>
                    </li>
                    <li data-item data-surface id="nav-insights">
                        <a href="insights.html">Insights</a>
                    </li>
                </ul>
                <!-- <div data-cell data-control-list></div> -->
                <div data-cell data-canvas data-interaction="scroll">

                    <!-- defs holder -->
                    <svg class="hidden">
                        <defs>
                            <filter id="pieChartInsetShadow">
                                <feOffset dx="0" dy="0"></feOffset>
                                <feGaussianBlur stdDeviation="3" result="offset-blur"></feGaussianBlur>
                                <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"></feComposite>
                                <feFlood flood-color="black" flood-opacity="1" result="color"></feFlood>
                                <feComponentTransfer>
                                    <feFuncA type="linear" slope="0.2"/>
                                </feComponentTransfer>
                                <feComposite operator="in" in="color" in2="inverse" result="shadow"></feComposite>
                                <feComposite operator="over" in="shadow" in2="SourceGraphic"></feComposite>
                            </filter>
                            <filter id="pieChartDropShadow">
                                <feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur" />
                                <feOffset in="blur" dx="0" dy="3" result="offsetBlur" />
                                <feComponentTransfer>
                                    <feFuncA type="linear" slope="0.2"/>
                                </feComponentTransfer>
                                <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic" />
                                </feMerge>
                            </filter>
                        </defs>
                    </svg>

                    <div data-row>
                        <div data-surface data-chart id="chart-one">
                            <h2>Traffic Sources</h2>
                            <svg></svg>
                        </div>
                        <div data-surface data-chart id="chart-two">
                            <h2>Fall Bags Sell-Through</h2>
                            <svg></svg>
                        </div>
                        <div data-surface data-chart id="chart-three">
                            <h2>Top Categories</h2>
                            <svg></svg>
                        </div>
                    </div>
                </div>

                <script src="http://d3js.org/d3.v3.min.js"></script>
                <script>

                    var data = [21, 34, 55, 89];

                    var width = 200,
                        height = 200,
                        radiusOffset = 10;

                    var outerRadius = height / 2 - radiusOffset,
                    innerRadius = outerRadius / 1.75,
                    cornerRadius = 10;

                    var pie = d3.layout.pie();

                    var arc = d3.svg.arc()
                    .padRadius(outerRadius)
                    .innerRadius(innerRadius);

                    var svg;
                    var centerContainer;

                    [].forEach.call( document.querySelectorAll( '[data-chart] svg' ), function( chart ) {
                        svg = d3.select( chart )
                            .attr( "width", width )
                            .attr( "height", height )
                            .append( "g" )
                            .attr( "transform", "translate(" + width / 2 + "," + height / 2 + ")" );

                        svg.selectAll( "path" )
                            .data( pie( data ) )
                            .enter()
                            .append( "path" )
                            .each( function( d ) {
                                d.outerRadius = outerRadius - radiusOffset;
                            })
                            .attr( "d", arc )
                            .on( "mouseover", arcTween( outerRadius, 0 ) )
                            .on( "mouseout", arcTween( outerRadius - radiusOffset, 150 ) );

                        svg.append( 'g' )
                            .append( 'circle' )
                            .attr( 'r', 0 )
                            .attr( 'filter', 'url(#pieChartDropShadow)' )
                            .attr( 'r', innerRadius )
                            .attr( 'fill', '#fff' );
                    });

                    function arcTween(outerRadius, delay) {
                        return function() {
                            d3.select(this).transition().delay(delay).attrTween("d", function(d) {
                                var i = d3.interpolate(d.outerRadius, outerRadius);
                                return function(t) { d.outerRadius = i(t); return arc(d); };
                            });
                        };
                    }

                </script>

            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>
